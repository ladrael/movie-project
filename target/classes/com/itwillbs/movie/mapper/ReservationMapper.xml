<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itwillbs.movie.mapper.ReservationMapper">
	<!-- 영화관 정보 -->
	<select id="selectCinema" resultType="hashmap">
		SELECT *
			FROM
				cinema
	</select>

	<!-- 영화정보 : 가나다순	 -->
	<select id="selectMovieInfo" resultType="hashmap">
		SELECT *
			FROM 
				movieinfo
			ORDER by 
				info_movie_title ASC
	</select>



	<!-- 영화관 - 영화리스트 -->
	<!-- 각 영화관에 상영하는 영화리스트 출력 -->
	<!-- 영화제목, 영화코드, 포스터, 관람등급, 개봉일, 장르 -->
	<select id="selectmoviesList" resultType="hashmap">
		select distinct m.info_movie_title, m.info_movie_code, m.info_movie_poster, m.info_rating, m.info_showdate, m.info_genre
			from 
				cinema c
			join 
				schedule s 
			on 
				c.cinema_code = s.sch_cinema_code 
			join 
				movieinfo m 
			on 
				m.info_movie_code = s.sch_movie_code 
			where 
				c.cinema_code = #{CnItemCd}
	</select>
	
	
	<!-- 상영 시간 리스트 -->
	<select id="selectMovieTimeList" resultType="hashmap">
		select *
			from 
				schedule sd
			join 
				screen sc 
		    on 
		    	sd.sch_screen_code = sc.screen_code
		    join 
		    	cinema c 
		    on 
		    	c.cinema_code = sd.sch_cinema_code
		    where 
		    	c.cinema_code = #{CnItemCd} 
		    and 
		    	sd.sch_movie_code = #{MvItemCd}
		    and 
		    	sd.sch_movie_date like CONCAT('%',#{dateCd})
	</select>
	
	<!-- 예매 좌석 조회 -->
	<select id="selectReservationList" resultType="hashmap">
		select res_sch_code, res_seat_line, res_seat_num
			from 
				reservation
			where 
				res_sch_code = #{schCd}
	</select>
	
	<select id="selectMemberId" resultType="hashmap">
		select * 
			from 
				member
			where 
				member_id = #{id}
	</select>
	
	<insert id="insertReservation">
		
	</insert>
	
</mapper>
