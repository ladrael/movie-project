<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itwillbs.movie.mapper.CinemaMapper">



<select id="location" resultType="hashmap">
	SELECT * FROM location
</select>
<select id="locationCinema" resultType="hashmap">
	SELECT cinema_name,
		   cinema_code
      FROM cinema
 LEFT JOIN location 
        ON cinema.location_code = location.location_code
  	 WHERE location_name = #{location_name}
</select>

<select id="noticeList" resultType="hashmap">
	SELECT cinema.cinema_name
	  ,location_name
	  ,notice_subject
	  ,notice_write_date 
	FROM notice_board
	LEFT JOIN cinema
	ON cinema.cinema_name = notice_board.cinema_name
	LEFT JOIN location 
	ON location.location_code = cinema.location_code
	ORDER BY notice_write_date desc
	LIMIT 5
</select>
<select id="cinemaDetail" resultType="hashmap">
	SELECT *
	  FROM cinema
	 WHERE cinema_code = #{cinema_code}
</select>
<select id="schList" resultType="hashmap">
	SELECT 
		    schedule.sch_movie_date
		  , schedule.sch_start_time
		  , schedule.sch_last_time
		  , cinema.cinema_name
		  , cinema.cinema_code
		  , movieInfo.info_rating
		  , movieInfo.info_movie_code
		  , movieInfo.info_movie_title
		  , screen.screen_name
		  , schedule.sch_screen_code
	 FROM schedule 
LEFT JOIN cinema 
	   ON cinema.cinema_code = schedule.sch_cinema_code
LEFT JOIN movieInfo
	   ON movieInfo.info_movie_code = schedule.sch_movie_code
LEFT JOIN screen
       on screen.screen_code = schedule.sch_screen_code
       where 1=1
       and sch_cinema_code = #{cinema_code}
<!--        and schedule.sch_movie_date=#{play_date} -->



</select>

</mapper>
	